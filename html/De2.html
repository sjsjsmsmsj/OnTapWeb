<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <style>
        .text-center {
            background-color: rgb(34, 131, 34);
            color: white;
            height: 50px;
            margin-top: 20px;
        }
        #dangKy:hover {
            background-color: rgb(58, 146, 58);
            color: white;
        }
        #tt {
            color: rgb(30, 0, 128);
        }
        .loiDo {
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <img src="../img/de2.png" alt="" width="100%" height="200px">
            </div>
        </div>
        <div class="row">

            <div class="col-2">
                <nav class="navbar">
                    <ul
                        class="nav justify-content-center flex-column"
                    >
                        <li class="nav-item">
                            <a class="nav-link active" href="#" aria-current="page"
                                >Hoạt động</a
                            >
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Danh sách lớp</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Ưu đãi</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#"  data-bs-toggle="modal" data-bs-target="#modalId" id="dangKy">Đăng ký</a>
                        
                            
                            <!-- Modal Body -->
                            <!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->
                            <div
                                class="modal fade"
                                id="modalId"
                                tabindex="-1"
                                data-bs-backdrop="static"
                                data-bs-keyboard="false"
                                
                                role="dialog"
                                aria-labelledby="modalTitleId"
                                aria-hidden="true"
                            >
                                <div
                                    class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md"
                                    role="document"
                                >
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalTitleId">
                                                <h4 id="tt">THÔNG TIN HỌC VIÊN</h4>
                                            </h5>
                                            <button
                                                type="button"
                                                class="btn-close"
                                                data-bs-dismiss="modal"
                                                aria-label="Close"
                                            ></button>
                                        </div>
                                        <div class="modal-body">
                                            <form action="" id="formDangKy">
                                                <div class="row">
                                                    <div class="col-lg-12"><input type="text" id="hoTen" placeholder="Họ tên"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoHoTen">(*)</div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-lg-12"><input type="text" id="SDT" placeholder="Số điện thoại"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoSDT">(*)</div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-lg-12"><input type="text" id="email" placeholder="Email"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoEmail">(*)</div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-lg-12"><input type="text" id="diaChi" placeholder="Địa chỉ"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoDiaChi">(*)</div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-lg-12"><input type="date" id="ngay"></div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoNgay">(*)</div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-12">bạn muốn học giáo viên Hà Nội hay TPHCM</div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12">
                                                        <input type="radio" name="diaDiem" id="" class="chonDD" value="Hà Nội">Hà Nội 
                                                        <input type="radio" name="diaDiem" id="" class="chonDD" value="TPHCM">TPHCM 
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-12 loiDo" id="loiDoChon">(*)</div>
                                                </div>

                                                <button type="submit" class="btn btn-primary">Đăng Ký</button>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <h5 class="text-left" style="background-color: white; color:blue">23703881-Lâm Gia Thịnh-DHKHMT19A</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Optional: Place to the bottom of scripts -->
                            <script>
                                const myModal = new bootstrap.Modal(
                                    document.getElementById("modalId"),
                                    options,
                                );
                            </script>
                            
                        </li>
                    </ul>
                    
                </nav>
            </div>
            
            <div class="col-10">
                <h3>DANH SACH ĐĂNG KÝ KHÓA HỌC</h3>
                <div
                    class="table-responsive"
                >
                    <table
                        class="table"
                        id="table-1"
                    >
                        <thead>
                            <tr>
                                <th scope="col">STT</th>
                                <th scope="col">Họ và tên</th>
                                <th scope="col">Số Điện Thoại</th>
                                <th scope="col">Email</th>
                                <th scope="col">Địa chỉ</th>
                                <th scope="col">Năm Sinh Học Viên</th>
                                <th>Giáo Viên</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                
            </div>
            <div class="row">
                <p class="text-center">23703881_Lâm Gia Thịnh-DHKHMT19A</p>
            </div>
        </div>
    </div>
    <script>
        let stt = 1;
        $('#formDangKy').submit(function(e) {
            e.preventDefault();
            let hoTen = $('#hoTen').val().trim();
            if (!/^([A-ZÀ-Ỹ]{1}[a-zà-ỹ]+)(\s[A-ZÀ-Ỹ]{1}[a-zà-ỹ]*)+$/.test(hoTen)) {
                $('#loiDoHoTen').text('Có ít nhất 2 từ và ký tự đầu tiền của mỗi từ phải được viết hoa');
                return;
            } else {
                $('#loiDoHoTen').text('');
            }

            let sdt = $('#SDT').val().trim();
            if (!/^0[3-9][0-9]{2}\.[0-9]{3}\.[0-9]{3}$/.test(sdt)) {
                $('#loiDoSDT').text('0XXX.XXX.XXX');
                return;
            } else {
                $('#loiDoSDT').text('');
            }

            let email = $('#email').val().trim();
            if (!/^([0-9a-zA-Z_]{3,})@gmail\.com$/.test(email)) {
                $('#loiDoEmail').text('tên trước @ ít nhất có 3 kí tự');
                return ;
            } else {
                $('#loiDoEmail').text('');
            }

            let diaChi = $('#diaChi').val().trim();
            if (!/^[0-9a-zà-ỹA-ZÀ-Ỹ\/\.\s]+$/.test(diaChi)) {
                $('#loiDoDiaChi').text('Nhập địa chỉ chỉ bao gồm các kí tự số và chữ và kí tự / .');
                return ;
            } else {
                $('#loiDoDiaChi').text('');
            }

            let ngaySinh = $('#ngay').val();
            let ns = new Date(ngaySinh);
            let ngayHT = new Date();
            let tuoi = ngayHT.getFullYear() - ns.getFullYear();
            let du = ngayHT.getMonth() < ns.getMonth() ||
                (ngayHT.getMonth() == ns.getMonth() && ngayHT.getDate() < ns.getDate());
            if (tuoi > 12 || (tuoi == 12 && !du)) {
                $('#loiDoNgay').text("");
            } else {
                $("#loiDoNgay").text("Ngày sinh hợp lệ khi tuổi từ 12 trở lên");
                return;
            }

            let diaDiem = $('input[name="diaDiem"]:checked').val();
            if(!diaDiem) {
                $('#loiDoChon').text("Chưa chọn địa điểm");
                return;
            } else {
                $('#loiDoChon').text('');
            }

            let row = `
                <tr>
                    <td>${stt++}</td>
                    <td>${hoTen}</td>
                    <td>${sdt}</td>
                    <td>${email}</td>
                    <td>${diaChi}</td>
                    <td>${ns.getFullYear()}</td>
                    <td>${diaDiem}</td>
                </tr>
            `
            $('#table-1 tbody').append(row);
            
            $('#formDangKy')[0].reset();
            $('#modalId').modal('hide');
        })
    </script>
</body>
</html>